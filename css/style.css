/* ============================================================
   style.css — House Project Explorer
   Designed to load inside an <iframe> within the DataMatter shell.
   All rules scoped carefully to avoid conflicts with the parent.
   ============================================================ */

/* ─── Theme Variables ──────────────────────────────────────── */
:root {
    --bg-color:      #f8fafc;
    --text-main:     #1e293b;
    --text-heading:  #0f172a;
    --text-muted:    #64748b;
    --card-bg:       #ffffff;
    --border:        #e2e8f0;
    --accent-blue:   #00a2ff;
    --accent-green:  #10b981;
    --accent-red:    #ef4444;
    --error-bg:      #fef2f2;
    --error-border:  #fecaca;
    --error-text:    #991b1b;
}

[data-theme="dark"] {
    --bg-color:      #0f111a;
    --text-main:     #e1e1e6;
    --text-heading:  #38bdf8;
    --text-muted:    #8892a4;
    --card-bg:       #1a1d29;
    --border:        #2d3142;
    --accent-blue:   #38bdf8;
    --accent-green:  #34d399;
    --accent-red:    #f87171;
    --error-bg:      #2a1a1a;
    --error-border:  #5a2d2d;
    --error-text:    #f8d7da;
}

/* ─── Base ─────────────────────────────────────────────────── */
*  { box-sizing: border-box; }

/* html + body must fill the iframe viewport fully.
   The parent shell sets overflow:hidden on its own body — that's fine,
   but THIS page's html+body must scroll independently inside the frame. */
html, body {
    height: 100%;
    margin: 0;
}

body {
    background-color: var(--bg-color);
    color:            var(--text-main);
    font-family:      'Segoe UI', system-ui, -apple-system, sans-serif;
    padding:          24px 28px;
    overflow-y:       auto;     /* iframe content scrolls vertically */
    overflow-x:       hidden;
    min-height:       100%;
    transition:       background-color 0.3s, color 0.3s;
}

.container {
    max-width: 1400px;
    margin:    0 auto;
}

/* ─── Title ────────────────────────────────────────────────── */
.title {
    color:      var(--text-heading);
    margin-top: 0;
}

/* ─── Back Navigation ──────────────────────────────────────── */
.nav-back {
    display:     inline-flex;
    align-items: center;
    gap:         6px;
    text-decoration: none;
    color:       var(--accent-blue);
    font-weight: 600;
    font-size:   14px;
    padding:     6px 0;
    margin-bottom: 4px;
    transition:  opacity 0.2s;
}
.nav-back:hover { opacity: 0.7; }

/* ─── Theme Toggle ─────────────────────────────────────────── */
.theme-toggle {
    position:     fixed;
    top:          12px;
    right:        16px;
    z-index:      9999;
    background:   var(--card-bg);
    border:       1px solid var(--border);
    border-radius: 20px;
    padding:      5px 12px;
    cursor:       pointer;
    font-size:    13px;
    color:        var(--text-main);
    display:      flex;
    align-items:  center;
    gap:          5px;
    box-shadow:   0 2px 6px rgba(0,0,0,0.12);
    transition:   background 0.3s, border-color 0.3s, color 0.3s;
}
.theme-toggle:hover { opacity: 0.8; }

/* ─── Summary / Insights ───────────────────────────────────── */
.summary-container {
    margin-bottom: 8px;
}

.insights-grid {
    display:               grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap:                   16px;
    margin-top:            16px;
}

.insight-card {
    background:  var(--card-bg);
    border:      1px solid var(--border);
    padding:     18px 20px;
    border-radius: 12px;
    transition:  border-color 0.2s, box-shadow 0.2s;
}
.insight-card:hover {
    border-color: var(--accent-blue);
    box-shadow:   0 2px 12px rgba(0,162,255,0.12);
}
.insight-card h4 {
    margin: 0 0 8px 0;
    color:  var(--text-heading);
    font-size: 15px;
}
.insight-card p {
    margin:    0;
    color:     var(--text-muted);
    font-size: 13.5px;
    line-height: 1.55;
}

/* ─── Loading State ────────────────────────────────────────── */
.loading-state {
    padding:    36px 20px;
    text-align: center;
    color:      var(--text-muted);
    font-size:  14px;
}
.loading-state .spinner {
    width:  26px;
    height: 26px;
    border: 3px solid var(--border);
    border-top-color: var(--accent-blue);
    border-radius: 50%;
    animation: spin 0.7s linear infinite;
    margin:    0 auto 10px;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ─── Error States ─────────────────────────────────────────── */
.error-banner {
    background:    var(--error-bg);
    color:         var(--error-text);
    border:        1px solid var(--error-border);
    border-radius: 8px;
    padding:       12px 16px;
    margin:        10px 0;
    font-size:     14px;
    display:       flex;
    align-items:   flex-start;
    gap:           10px;
}
.error-banner .error-icon {
    font-size:  18px;
    flex-shrink: 0;
    line-height: 1;
}

.error-inline {
    background:    var(--error-bg);
    border:        1px solid var(--error-border);
    border-radius: 10px;
    padding:       28px 20px;
    text-align:    center;
}
.error-inline .error-title {
    color:     var(--error-text);
    font-size: 15px;
    font-weight: 600;
    margin-bottom: 6px;
}
.error-inline .error-detail {
    color:     var(--error-text);
    font-size: 13px;
    opacity:   0.8;
}

/* ─── Map ──────────────────────────────────────────────────── */
#map {
    height:        500px;
    width:         100%;
    border-radius: 12px;
    border:        1px solid var(--border);
    margin:        20px 0 32px 0;
    position:      relative;  /* z-index needs a positioning context */
    z-index:       1;
}

/* ─── Table Controls ───────────────────────────────────────── */
.table-controls {
    display:         flex;
    align-items:     center;
    justify-content: space-between;
    margin-bottom:   10px;
    flex-wrap:       wrap;
    gap:             8px;
}
.table-controls h3   { margin: 0; }
.table-controls .row-count {
    font-size: 13px;
    color:     var(--text-muted);
}

/* ─── Table Wrapper & Table ────────────────────────────────── */
.table-wrapper {
    overflow-x:  auto;
    overflow-y:  auto;       /* scroll container for sticky header */
    background:  var(--card-bg);
    border-radius: 12px;
    border:      1px solid var(--border);
    max-height:  560px;
    box-shadow:  0 2px 8px rgba(0,0,0,0.06);
}

table {
    width:           100%;
    border-collapse: collapse;
    min-width:       800px;
}

thead th {
    background-color: var(--card-bg);
    color:            var(--accent-blue);
    padding:          12px 14px;
    position:         sticky;
    top:              0;
    text-align:       left;
    font-size:        11.5px;
    font-weight:      600;
    text-transform:   uppercase;
    letter-spacing:   0.6px;
    border-bottom:    2px solid var(--border);
    white-space:      nowrap;
    z-index:          2;
}

tbody td {
    padding:       11px 14px;
    border-bottom: 1px solid var(--border);
    font-size:     13.5px;
    color:         var(--text-main);
    white-space:   nowrap;
}

tbody tr:last-child td  { border-bottom: none; }
tbody tr:hover          { background-color: rgba(0,162,255,0.05); }

/* ─── Misc ─────────────────────────────────────────────────── */
.market-status-pill {
    background:    var(--accent-green);
    color:         #fff;
    padding:       4px 12px;
    border-radius: 20px;
    font-weight:   600;
    font-size:     12px;
    display:       inline-block;
}

.pro-tip {
    font-size:   12px;
    color:       var(--accent-blue);
    margin-top:  10px;
    border-top:  1px solid var(--border);
    padding-top: 6px;
}
